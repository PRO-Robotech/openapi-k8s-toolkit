server {
    listen 80;
    server_name localhost;

    root /usr/share/nginx/html;
    index index.html;

    # 1) Only handle the exact "/" path here
    location = / {
        # If there is no "path" query param, redirect to your welcome story
        if ($arg_path = "") {
            return 302 $scheme://$http_host/?path=/story/welcome--overview;
        }

        # If there IS a path param, just serve Storybook (index.html)
        try_files /index.html =404;
    }

    # 2) Everything else: normal Storybook static + SPA fallback
    location / {
        # Serve actual files (JS, CSS, images, iframe.html, etc.)
        # and only fall back to index.html if no file exists
        try_files $uri $uri/ /index.html;
    }
}
